<div class="peopleList">
  <% @people.each do |person| %>
    <div class="panel panel-primary" id="person_<%= person.id %>">
      <div class="panel-heading">
        <div class="panel-title">
          <%= person.name %>
        </div>
      </div>
      <div class="panel-body">
        <div class="row">
          <% if person.phone_numbers.any? %>
            <%= person.phone_numbers.each do |number| %>
              <%= number.humanized_number %>
            <% end %>
          <% else %>
            <h4>No phone numbers added. Add one!</h4>
          <% end %>
          <%= link_to("Delete contact", person_path(person) , method: :delete, remote: true) %>
          <%= link_to("Edit", edit_person_path(person) , id: 'editPersonForm', data:{person_id: person.id}) %>
        </div>
      </div>
    </div>
  <% end %>
</div>
<div class="newPerson">
  <%= link_to("Add new contact", new_person_path ,id: "newPersonForm") %>
</div>


<script>
  $('a#editPersonForm').click(function(click){
    click.preventDefault();
    var person_id = $(this).attr('data-person-id') 
    var selector = "#person_"+ person_id + "> div.panel-body"
    $.ajax({
      url: $(this).attr('href')
      }).done(function(html){
        $(selector).prepend(html)
      })
  })
</script>